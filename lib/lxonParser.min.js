/*
	LXON parser generated by json-kit v0.7.3 (by CÃ©dric Ronvel)
	Special features: lxon
*/
"use strict";var depthLimit=Infinity;function parse(str,limit){var v,runtime={i:0};if(typeof str!=="string"){if(str&&typeof str==="object"){str=str.toString()}else{throw new TypeError("Argument #0 should be a string or an object with a .toString() method")}}parseIdle(str,runtime);if(runtime.i>=str.length){throw new SyntaxError("Empty")}v=parseValue(str,runtime);parseIdle(str,runtime);if(runtime.i<str.length){throw new SyntaxError("Unexpected "+str[runtime.i])}return v}module.exports=parse;function parseIdle(str,runtime){var c;for(;runtime.i<str.length;runtime.i++){c=str.charCodeAt(runtime.i);if(c>32){return c}if(c===32||c===10||c===13||c===9){continue}throw new SyntaxError("Unexpected "+str[runtime.i])}return-1}function parseValue(str,runtime){var c;c=str.charCodeAt(runtime.i);if(c===45){runtime.i++;parseIdle(str,runtime);c=str.charCodeAt(runtime.i);if(c>=65&&c<=90||c>=97&&c<=122){runtime.i++;return parseLxonConstant(str,runtime,LXON_NEGATIVE_CONSTANTS)}if(c>=48&&c<=57){return parseNegativeNumber(str,runtime)}throw new SyntaxError("Unexpected "+str[runtime.i])}if(c>=48&&c<=57){return parseNumber(str,runtime)}runtime.i++;switch(c){case 123:return parseObject(str,runtime);case 91:return parseArray(str,runtime);case 34:return parseString(str,runtime);default:if(c>=65&&c<=90||c>=97&&c<=122){return parseLxonConstant(str,runtime)}throw new SyntaxError("Unexpected "+str[runtime.i-1])}}const LXON_CONSTANTS=new Map([["null",null],["false",false],["true",true],["NaN",NaN],["nan",NaN],["Infinity",Infinity],["infinity",Infinity],["off",false],["on",true],["no",false],["yes",true]]);const LXON_NEGATIVE_CONSTANTS=new Map([["Infinity",-Infinity],["infinity",-Infinity]]);function parseLxonConstant(str,runtime,constants=LXON_CONSTANTS){var c,id,j=runtime.i,l=str.length;for(;j<l;j++){c=str.charCodeAt(j);if(!(c>=65&&c<=90||c>=97&&c<=122)){break}}id=str.slice(runtime.i-1,j);if(!constants.has(id)){throw new SyntaxError("Unexpected "+id)}runtime.i=j;return constants.get(id)}function parseNumber(str,runtime){var match=str.slice(runtime.i).match(/^-?[0-9]+(\.[0-9]+)?([eE][+-]?[0-9]+)?/)[0];runtime.i+=match.length;return parseFloat(match)}function parseNegativeNumber(str,runtime){var match=str.slice(runtime.i).match(/^[0-9]+(\.[0-9]+)?([eE][+-]?[0-9]+)?/)[0];runtime.i+=match.length;return-parseFloat(match)}function parseString(str,runtime){var c,j=runtime.i,l=str.length,v="";for(;j<l;j++){c=str.charCodeAt(j);if(c===34||c===92||c<=31){if(c===34){v+=str.slice(runtime.i,j);runtime.i=j+1;return v}else if(c===92){v+=str.slice(runtime.i,j);runtime.i=j+1;v+=parseBackSlash(str,runtime);j=runtime.i-1}else if(c<=31){throw new SyntaxError("Unexpected control char 0x"+c.toString(16))}}}throw new SyntaxError("Unexpected end, expecting a double-quote.")}var parseBackSlashLookup_=function createParseBackSlashLookup(){var c=0,lookup=new Array(128);for(;c<128;c++){if(c===98){lookup[c]="\b"}else if(c===102){lookup[c]="\f"}else if(c===110){lookup[c]="\n"}else if(c===114){lookup[c]="\r"}else if(c===116){lookup[c]="\t"}else if(c===92){lookup[c]="\\"}else if(c===47){lookup[c]="/"}else if(c===34){lookup[c]='"'}else{lookup[c]=""}}return lookup}();function parseBackSlash(str,runtime){var v,c=str.charCodeAt(runtime.i);if(runtime.i>=str.length){throw new SyntaxError("Unexpected end")}if(c===117){runtime.i++;v=parseUnicode(str,runtime);return v}else if((v=parseBackSlashLookup_[c]).length){runtime.i++;return v}throw new SyntaxError('Unexpected token: "'+str[runtime.i]+'"')}function parseUnicode(str,runtime){if(runtime.i+3>=str.length){throw new SyntaxError("Unexpected end")}var match=str.slice(runtime.i,runtime.i+4).match(/[0-9a-f]{4}/);if(!match){throw new SyntaxError("Unexpected "+str.slice(runtime.i,runtime.i+4))}runtime.i+=4;return String.fromCharCode(Number.parseInt(match[0],16))}function parseLxonUnquotedKey(str,runtime){var c,v,j=runtime.i+1,l=str.length;for(;j<l;j++){c=str.charCodeAt(j);if(!(c>=64&&c<=90||c>=97&&c<=122||c>=48&&c<=57||c===95||c===36||c===45)){v=str.slice(runtime.i,j);runtime.i=j;return v}}throw new SyntaxError("Unexpected end, expecting a colon.")}function parseArray(str,runtime){var j=0,c,v=[];c=parseIdle(str,runtime);if(c===93){runtime.i++;return v}for(;;j++){v[j]=parseValue(str,runtime);c=parseIdle(str,runtime);switch(c){case 44:runtime.i++;break;case 93:runtime.i++;return v;default:throw new Error("Unexpected "+str[runtime.i])}parseIdle(str,runtime)}}function parseObject(str,runtime){var c,v,k;c=parseIdle(str,runtime);if(c===125){runtime.i++;return{}}v={};for(;;){k=parseKey(str,runtime,c);c=parseIdle(str,runtime);if(c!==58){throw new Error("Unexpected "+str[runtime.i])}runtime.i++;parseIdle(str,runtime);v[k]=parseValue(str,runtime);c=parseIdle(str,runtime);switch(c){case 44:runtime.i++;break;case 125:runtime.i++;return v;default:throw new Error("Unexpected "+str[runtime.i])}c=parseIdle(str,runtime)}}function parseKey(str,runtime,c){if(c>=64&&c<=90||c>=97&&c<=122||c>=48&&c<=57||c===95||c===36||c===45){return parseLxonUnquotedKey(str,runtime)}if(c!==34){throw new Error("Unexpected "+str[runtime.i])}runtime.i++;return parseString(str,runtime)}function getPath(object,path){var i=0,iMax=path.length,p=object;try{for(;i<iMax;i++){p=p[path[i]]}}catch(error){throw new Error("Bad ref: path not found")}return p}function parseSkipString(str,runtime){var c;for(;runtime.i<str.length;runtime.i++){c=str.charCodeAt(runtime.i);if(c===34||c===92){runtime.i++;if(c===34){return}}}throw new SyntaxError("Unexpected end")}function parseSkipNested(str,runtime){var c,depth=1;for(;runtime.i<str.length;runtime.i++){c=str.charCodeAt(runtime.i);if(c===91||c===123||c===93||c===125||c===34){if(c===91||c===123){depth++}else if(c===93||c===125){depth--;if(depth===0){runtime.i++;return}}else if(c===34){runtime.i++;parseSkipString(str,runtime);runtime.i--}}}throw new SyntaxError("Unexpected end")}
